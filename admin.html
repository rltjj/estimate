<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>관리자 - 신청 내역</title>
  <link rel="stylesheet" href="css/style.css?v=<?=filemtime('css/style.css')?>">
</head>

<body>
  <div class="buttons">
    <button id="go">견적서 생성하기</button>
  </div>

  <script>
    document.getElementById('go').addEventListener('click', () => {
      window.location.href = 'estimate.html';
    });
  </script>
  <div class="container">
    <h1>신청 내역 관리</h1>
    <table id="estimateList">
      <thead>
        <tr>
          <th>고객명</th>
          <th>회사명</th>
          <th>신청일</th>
          <th>상태</th>
          <th>상세보기</th>
        </tr>
      </thead>
      <tbody>
        <!-- JS에서 목록 생성 -->
      </tbody>
    </table>
  </div>

  <script>
    // 예시 데이터 (나중에 DB에서 fetch로 가져오기)
    const estimates = [
      { id: 1, userName: "홍길동", company: "(주)성진글로벌", date: "2025-09-12", state: "신청됨" },
      { id: 2, userName: "김철수", company: "(주)테스트컴퍼니", date: "2025-09-11" },
    ];

    const tbody = document.querySelector('#estimateList tbody');
    estimates.forEach(est => {
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td>${est.userName}</td>
        <td>${est.company}</td>
        <td>${est.date}</td>
        <td>${est.state}</td>
        <td><button data-id="${est.id}">상세보기</button></td>
      `;
      tbody.appendChild(tr);
    });

    tbody.querySelectorAll('button').forEach(btn => {
      btn.addEventListener('click', e => {
        const id = e.target.getAttribute('data-id');
        // 상세보기 페이지로 이동 (id 전달)
        window.location.href = `estimate.html?estimateId=${id}`;
      });
    });
  </script>
</body>

</html>